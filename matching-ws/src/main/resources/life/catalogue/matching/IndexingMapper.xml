<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="life.catalogue.matching.IndexingMapper">
    <select id="getAllForDataset"
            resultType="life.catalogue.matching.NameUsage"
            resultOrdered="true"
            fetchSize="10" resultSetType="FORWARD_ONLY">
      SELECT
        nu.id as id,
        nu.parent_id as parentId,
        nu.status as status,
        n.scientific_name as scientificName,
        n.authorship,
        n.rank,
        n.code as nomenclaturalCode
      FROM
        name_usage nu
      INNER JOIN
        name n on n.id = nu.name_id AND n.dataset_key=#{datasetKey}
      WHERE
        nu.dataset_key = #{datasetKey}
    </select>
</mapper>